# AIGit - AIé©±åŠ¨çš„Git Commit Messageç”Ÿæˆå™¨

ä¸€ä¸ªåŸºäºOpenAIçš„æ™ºèƒ½Git commit messageç”Ÿæˆå·¥å…·ï¼Œèƒ½å¤Ÿè‡ªåŠ¨åˆ†æä»£ç å˜æ›´å¹¶ç”Ÿæˆæ¸…æ™°ã€è§„èŒƒçš„commit messageã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¤– æ”¯æŒOpenAIå’ŒDeepSeekä¸¤ç§AIæœåŠ¡
- ğŸŒ æ”¯æŒå¤šç§è¯­è¨€ï¼ˆä¸­æ–‡ã€è‹±æ–‡ç­‰ï¼‰
- ğŸ“ æ”¯æŒå¤šç§commit messageé£æ ¼ï¼ˆConventional Commitsã€ç®€æ´ã€è¯¦ç»†ï¼‰
- ğŸ” **æ™ºèƒ½é¡¹ç›®é…ç½®æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹é¡¹ç›®commitè§„èŒƒå¹¶è°ƒæ•´é…ç½®
- ğŸ” **AIä»£ç å®¡æŸ¥** - æ™ºèƒ½åˆ†æä»£ç å˜æ›´å¹¶ç»™å‡ºä¿®æ”¹å»ºè®®
- âš™ï¸ çµæ´»çš„é…ç½®é€‰é¡¹
- ğŸ” é¢„è§ˆæ¨¡å¼ï¼Œä¸ç›´æ¥æäº¤
- ğŸš€ æ”¯æŒè‡ªåŠ¨æäº¤
- ğŸ’¡ æ™ºèƒ½æç¤ºå’Œé”™è¯¯å¤„ç†
- ğŸ”‘ äº¤äº’å¼AIæœåŠ¡é€‰æ‹©å’ŒAPIå¯†é’¥é…ç½®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ä»npmå®‰è£…ï¼ˆæ¨èï¼‰

```bash
# å…¨å±€å®‰è£…
npm install -g aigit-cli

# éªŒè¯å®‰è£…
aigit --version
```

### 2. ä»æºç å®‰è£…

#### æ–¹æ³•1: ä½¿ç”¨å®‰è£…è„šæœ¬
```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd aigit

# è¿è¡Œå®‰è£…è„šæœ¬
./install-global.sh
```

#### æ–¹æ³•2: æ‰‹åŠ¨å®‰è£…
```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd aigit

# å®‰è£…ä¾èµ–
npm install

# åˆ›å»ºå…¨å±€é“¾æ¥
npm link
```

#### æ–¹æ³•3: å¼€å‘æ¨¡å¼
```bash
# å®‰è£…ä¾èµ–
npm install

# è¿è¡ŒCLI
npm start
# æˆ–è€…
node bin/aigit.js
```

### 2. é…ç½®AIæœåŠ¡æä¾›å•†å’ŒAPIå¯†é’¥

#### æ–¹æ³•1: äº¤äº’å¼é…ç½®ï¼ˆæ¨èï¼‰
é¦–æ¬¡è¿è¡Œæ—¶ï¼ŒCLIå·¥å…·ä¼šæç¤ºä½ é€‰æ‹©AIæœåŠ¡æä¾›å•†å¹¶è¾“å…¥APIå¯†é’¥ï¼š
```bash
node bin/aigit.js
# å·¥å…·ä¼šæç¤ºé€‰æ‹©OpenAIæˆ–DeepSeek
# ç„¶åè¾“å…¥å¯¹åº”çš„APIå¯†é’¥
# é€‰æ‹©æ˜¯å¦ä¿å­˜åˆ°é…ç½®æ–‡ä»¶
```

#### æ–¹æ³•2: ç¯å¢ƒå˜é‡
```bash
# é€‰æ‹©OpenAI
export AI_PROVIDER="openai"
export OPENAI_API_KEY="your-openai-api-key-here"

# æˆ–é€‰æ‹©DeepSeek
export AI_PROVIDER="deepseek"
export DEEPSEEK_API_KEY="your-deepseek-api-key-here"
```

#### æ–¹æ³•3: é…ç½®æ–‡ä»¶
åœ¨ç”¨æˆ·ä¸»ç›®å½•åˆ›å»º `~/.aigitrc` æ–‡ä»¶ï¼š
```json
{
  "provider": "openai",
  "openaiApiKey": "your-openai-api-key-here",
  "openaiModel": "gpt-4",
  "deepseekApiKey": "your-deepseek-api-key-here",
  "deepseekModel": "deepseek-chat",
  "temperature": 0.8,
  "language": "ä¸­æ–‡",
  "style": "conventional"
}
```

#### æ–¹æ³•4: æŸ¥çœ‹é…ç½®å¸®åŠ©
```bash
node bin/aigit.js --config-help
```

### 3. ä½¿ç”¨CLIå·¥å…·

```bash
# åŸºæœ¬ä½¿ç”¨ï¼ˆå…¨å±€å®‰è£…åï¼‰- è‡ªåŠ¨addã€æäº¤ã€åˆå¹¶master
aigit

# æŒ‡å®šAIæœåŠ¡æä¾›å•†
aigit -p openai

# æŒ‡å®šAIæ¨¡å‹
aigit -m gpt-4

# æŒ‡å®šè¯­è¨€
aigit -l ä¸­æ–‡

# æŒ‡å®šé£æ ¼
aigit -s conventional

# é¢„è§ˆæ¨¡å¼ï¼ˆä¸æäº¤ï¼Œä¸addï¼‰
aigit -d

# ç¦ç”¨è‡ªåŠ¨æ·»åŠ æ–‡ä»¶
aigit --no-auto-add

# ç¦ç”¨è‡ªåŠ¨åˆå¹¶master
aigit --no-auto-merge

# æŸ¥çœ‹å¸®åŠ©
aigit --help

# æŸ¥çœ‹é…ç½®å¸®åŠ©
aigit --config-help
```

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬å·¥ä½œæµç¨‹

1. **å‡†å¤‡ä»£ç å˜æ›´**
   ```bash
   git add .  # æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº
   ```

2. **ç”Ÿæˆcommit message**
   ```bash
   node bin/aigit.js
   ```

3. **æŸ¥çœ‹ç”Ÿæˆçš„message**
   å·¥å…·ä¼šæ˜¾ç¤ºAIç”Ÿæˆçš„commit message

4. **é€‰æ‹©æ“ä½œ**
   - ä½¿ç”¨ `--dry-run` é¢„è§ˆ
   - è‡ªåŠ¨æäº¤ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰
   - æ‰‹åŠ¨å¤åˆ¶messageè¿›è¡Œæäº¤

## ğŸš€ å‘å¸ƒåˆ°npm

### å‘å¸ƒåˆ°å®˜æ–¹npm (npmjs.com)

é¡¹ç›®å·²é…ç½®ä¸ºå‘å¸ƒåˆ°å®˜æ–¹npm registryã€‚ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ï¼š

```bash
# å‘å¸ƒåˆ°å®˜æ–¹npm
./publish-npmjs.sh

# æˆ–æ‰‹åŠ¨å‘å¸ƒ
npm publish --registry=https://registry.npmjs.org/
```

### å‘å¸ƒåˆ°ç§æœ‰npm

å¦‚æœéœ€è¦å‘å¸ƒåˆ°ç§æœ‰npm registryï¼š

```bash
# å‘å¸ƒåˆ°ç§æœ‰npm
./publish-npm.sh
```

## ğŸ” æ™ºèƒ½é¡¹ç›®é…ç½®æ£€æµ‹

AIGitç°åœ¨å…·å¤‡æ™ºèƒ½é¡¹ç›®é…ç½®æ£€æµ‹åŠŸèƒ½ï¼Œèƒ½å¤Ÿè‡ªåŠ¨åˆ†æé¡¹ç›®ç»“æ„å¹¶æ¨èæœ€é€‚åˆçš„commité…ç½®ï¼š

### è‡ªåŠ¨æ£€æµ‹çš„é…ç½®ç±»å‹

1. **Commitlinté…ç½®**
   - æ£€æµ‹ `.commitlintrc*` æ–‡ä»¶
   - æ£€æµ‹ `commitlint.config.js/ts` æ–‡ä»¶
   - è‡ªåŠ¨æ¨èä½¿ç”¨ `conventional` é£æ ¼

2. **Conventional Changelogé…ç½®**
   - æ£€æµ‹ `package.json` ä¸­çš„ç›¸å…³ä¾èµ–
   - æ”¯æŒå¤šç§é¢„è®¾ï¼ˆangularã€eslintã€expressç­‰ï¼‰
   - è‡ªåŠ¨æ¨èä½¿ç”¨ `conventional` é£æ ¼

3. **Commitizené…ç½®**
   - æ£€æµ‹ `package.json` ä¸­çš„ `commitizen` é…ç½®
   - è‡ªåŠ¨æ¨èä½¿ç”¨ `conventional` é£æ ¼

4. **Gitæ¨¡æ¿é…ç½®**
   - æ£€æµ‹ `.gitmessage` æ–‡ä»¶
   - æ£€æµ‹å…¨å±€å’Œé¡¹ç›®çº§commitæ¨¡æ¿
   - è‡ªåŠ¨æ¨èä½¿ç”¨ `detailed` é£æ ¼

5. **Huskyé…ç½®**
   - æ£€æµ‹ `.husky` ç›®å½•å’Œé…ç½®
   - è¯†åˆ«git hooksé…ç½®

6. **é¡¹ç›®ç±»å‹æ¨æ–­**
   - å¼€æºé¡¹ç›®ï¼šæ¨è `conventional` é£æ ¼
   - åº”ç”¨é¡¹ç›®ï¼šæ¨è `simple` é£æ ¼
   - åº“/æ¡†æ¶é¡¹ç›®ï¼šæ¨è `conventional` é£æ ¼

### ä½¿ç”¨æ–¹æ³•

```bash
# æ£€æµ‹é¡¹ç›®é…ç½®ï¼ˆä¸ç”Ÿæˆcommitï¼‰
aigit --detect-project

# è‡ªåŠ¨ä½¿ç”¨æ£€æµ‹åˆ°çš„é…ç½®ç”Ÿæˆcommit
aigit

# å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šé£æ ¼ï¼ˆè¦†ç›–è‡ªåŠ¨æ£€æµ‹ï¼‰
aigit -s conventional
```

### æ£€æµ‹ç»“æœç¤ºä¾‹

```
ğŸ” é¡¹ç›®é…ç½®æ£€æµ‹ç»“æœ:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ æ¨èCommité£æ ¼: conventional
ğŸŒ æ¨èè¯­è¨€: ä¸­æ–‡
ğŸ’¡ æ¨èåŸå› : æ£€æµ‹åˆ°commitlinté…ç½®, æ£€æµ‹åˆ°.gitmessageæ¨¡æ¿æ–‡ä»¶, æ£€æµ‹åˆ°å¼€æºé¡¹ç›®é…ç½®
âœ… æ£€æµ‹åˆ°commitlinté…ç½®
âœ… æ£€æµ‹åˆ°.gitmessageæ¨¡æ¿
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

## ğŸ’° Tokenä¼˜åŒ–

ä¸ºäº†å‡å°‘APIè°ƒç”¨æˆæœ¬ï¼Œå·¥å…·å†…ç½®äº†æ™ºèƒ½çš„tokenä¼˜åŒ–åŠŸèƒ½ï¼š

### è‡ªåŠ¨ä¼˜åŒ–ç­–ç•¥

1. **æ™ºèƒ½diffå¤„ç†**
   - è‡ªåŠ¨ç§»é™¤ä¸å¿…è¦çš„git diffä¿¡æ¯
   - é™åˆ¶ä¸Šä¸‹æ–‡è¡Œæ•°ï¼ˆ--unified=1ï¼‰
   - ç§»é™¤æ–‡ä»¶è·¯å¾„å‰ç¼€

2. **å†…å®¹æˆªæ–­**
   - å½“æ–‡ä»¶æ•°é‡ > 10æ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨ç»Ÿè®¡æ¨¡å¼
   - é™åˆ¶diffæœ€å¤§é•¿åº¦ä¸º2000å­—ç¬¦
   - æ™ºèƒ½ä¿ç•™é‡è¦ä¿¡æ¯

3. **Promptä¼˜åŒ–**
   - ç®€åŒ–promptæ¨¡æ¿
   - å‡å°‘ç³»ç»Ÿæ¶ˆæ¯é•¿åº¦
   - ä¼˜åŒ–æŒ‡ä»¤æè¿°

### é…ç½®é€‰é¡¹

åœ¨ `~/.aigitrc` ä¸­å¯ä»¥é…ç½®ï¼š

```json
{
  "useSimplifiedDiff": true,    // å¯ç”¨ç®€åŒ–diffæ¨¡å¼
  "maxDiffLength": 2000         // æœ€å¤§diffé•¿åº¦
}
```

### æµ‹è¯•ä¼˜åŒ–æ•ˆæœ

```bash
# æµ‹è¯•tokenä¼˜åŒ–
node test-token-optimization.js
```

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç®€å†™ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `--provider` | `-p` | AIæœåŠ¡æä¾›å•† (openai/deepseek) | `openai` |
| `--model` | `-m` | AIæ¨¡å‹ | `gpt-3.5-turbo` |
| `--temperature` | `-t` | AIç”Ÿæˆæ¸©åº¦ | `0.7` |
| `--language` | `-l` | è¾“å‡ºè¯­è¨€ | `ä¸­æ–‡` |
| `--style` | `-s` | Commité£æ ¼ | `conventional` |
| `--dry-run` | `-d` | é¢„è§ˆæ¨¡å¼ï¼ˆä¸æäº¤ï¼Œä¸addï¼‰ | `false` |
| `--no-auto-add` | | ç¦ç”¨è‡ªåŠ¨git add . | `false` |
| `--no-auto-merge` | | ç¦ç”¨è‡ªåŠ¨åˆå¹¶masteråˆ†æ”¯ | `false` |
| `--config-help` | | æ˜¾ç¤ºé…ç½®å¸®åŠ© | `false` |
| `--detect-project` | | æ£€æµ‹å¹¶æ˜¾ç¤ºé¡¹ç›®é…ç½® | `false` |

### Commit Messageé£æ ¼

#### 1. Conventional Commits (`conventional`)
```
feat(auth): æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
fix(api): ä¿®å¤ç”¨æˆ·æ•°æ®è·å–é”™è¯¯
docs(readme): æ›´æ–°å®‰è£…è¯´æ˜
```

#### 2. ç®€æ´é£æ ¼ (`simple`)
```
æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
ä¿®å¤APIé”™è¯¯
æ›´æ–°æ–‡æ¡£
```

#### 3. è¯¦ç»†é£æ ¼ (`detailed`)
```
feat: å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

- æ·»åŠ JWT tokenæ”¯æŒ
- å®ç°å¯†ç åŠ å¯†
- æ·»åŠ ç”¨æˆ·ä¼šè¯ç®¡ç†
- æ”¯æŒè®°ä½ç™»å½•çŠ¶æ€
```

## âš™ï¸ é…ç½®é€‰é¡¹

### ç¯å¢ƒå˜é‡
- `AI_PROVIDER`: AIæœåŠ¡æä¾›å•† (`openai` æˆ– `deepseek`)
- `OPENAI_API_KEY`: OpenAI APIå¯†é’¥ï¼ˆå½“providerä¸ºopenaiæ—¶å¿…éœ€ï¼‰
- `DEEPSEEK_API_KEY`: DeepSeek APIå¯†é’¥ï¼ˆå½“providerä¸ºdeepseekæ—¶å¿…éœ€ï¼‰

### é…ç½®æ–‡ä»¶ (~/.aigitrc)
```json
{
  "openaiApiKey": "your-api-key",
  "openaiModel": "gpt-4",
  "temperature": 0.8,
  "language": "ä¸­æ–‡",
  "style": "conventional",
  "maxTokens": 150
}
```

### é…ç½®ä¼˜å…ˆçº§
1. å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€é«˜ï¼‰
2. é…ç½®æ–‡ä»¶
3. ç¯å¢ƒå˜é‡
4. é»˜è®¤å€¼ï¼ˆæœ€ä½ï¼‰

## ğŸ”§ å¼€å‘

### é¡¹ç›®ç»“æ„
```
aigit/
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ aigit.js          # CLIå…¥å£æ–‡ä»¶
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config.js         # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ generator.js      # AIç”Ÿæˆå™¨
â”‚   â””â”€â”€ git.js           # Gitæ“ä½œ
â”œâ”€â”€ package.json
â”œâ”€â”€ example-config.json   # ç¤ºä¾‹é…ç½®æ–‡ä»¶
â””â”€â”€ README.md
```

### æœ¬åœ°å¼€å‘
```bash
# å®‰è£…ä¾èµ–
npm install

# è¿è¡ŒCLI
npm start

# æˆ–è€…ç›´æ¥è¿è¡Œ
node bin/aigit.js

# å…¨å±€å®‰è£…
npm link

# å¸è½½å…¨å±€é“¾æ¥
npm unlink aigit
```

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ç›¸åº”æ¨¡å—ä¸­æ·»åŠ åŠŸèƒ½
2. æ›´æ–°CLIå‚æ•°è§£æ
3. æ·»åŠ æµ‹è¯•ç”¨ä¾‹
4. æ›´æ–°æ–‡æ¡£

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. "ç¼ºå°‘AIæœåŠ¡æä¾›å•†é…ç½®"é”™è¯¯
- é¦–æ¬¡è¿è¡Œæ—¶ä¼šæç¤ºé€‰æ‹©AIæœåŠ¡æä¾›å•†å¹¶è¾“å…¥APIå¯†é’¥
- æ£€æŸ¥ç¯å¢ƒå˜é‡ `AI_PROVIDER` æ˜¯å¦è®¾ç½®
- æ£€æŸ¥å¯¹åº”çš„APIå¯†é’¥ç¯å¢ƒå˜é‡æ˜¯å¦è®¾ç½®
- æ£€æŸ¥é…ç½®æ–‡ä»¶ `~/.aigitrc` æ˜¯å¦æ­£ç¡®
- ç¡®ä¿APIå¯†é’¥æœ‰æ•ˆä¸”æœªè¿‡æœŸ

#### 2. "å½“å‰ç›®å½•ä¸æ˜¯gitä»“åº“"é”™è¯¯
- ç¡®ä¿åœ¨gitä»“åº“ç›®å½•ä¸­è¿è¡Œå‘½ä»¤
- è¿è¡Œ `git init` åˆå§‹åŒ–ä»“åº“

#### 3. "æ²¡æœ‰æ£€æµ‹åˆ°ä»£ç å˜æ›´"é”™è¯¯
- ä½¿ç”¨ `git add` æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº
- æ£€æŸ¥æ˜¯å¦æœ‰æœªä¿å­˜çš„ä¿®æ”¹

#### 4. AI APIé”™è¯¯
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯APIå¯†é’¥å’Œé…é¢
- æ£€æŸ¥æ¨¡å‹åç§°æ˜¯å¦æ­£ç¡®
- ç¡®è®¤é€‰æ‹©çš„AIæœåŠ¡æä¾›å•†æ˜¯å¦æ­£ç¡®

### è°ƒè¯•æ¨¡å¼
```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
DEBUG=* node bin/aigit.js
```

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ•…éšœæ’é™¤éƒ¨åˆ†
2. æœç´¢ç°æœ‰Issue
3. åˆ›å»ºæ–°çš„Issueå¹¶æä¾›è¯¦ç»†ä¿¡æ¯

## ğŸŒ å…¨å±€å®‰è£…

### å®‰è£…åˆ°å…¨å±€
```bash
# åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ
npm link

# éªŒè¯å®‰è£…
aigit --version
```

### ä»å…¨å±€å¸è½½
```bash
# å¸è½½å…¨å±€é“¾æ¥
npm unlink aigit

# æˆ–è€…è¿è¡Œå¸è½½è„šæœ¬
./uninstall-global.sh
```

### åœ¨ä»»ä½•ç›®å½•ä½¿ç”¨
å…¨å±€å®‰è£…åï¼Œä½ å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹ä½¿ç”¨ `aigit` å‘½ä»¤ï¼š

```bash
cd /path/to/your/project
aigit                    # ç”Ÿæˆcommit message
aigit -p openai        # ä½¿ç”¨OpenAI
aigit -p deepseek      # ä½¿ç”¨DeepSeek
aigit --detect-project # æ£€æµ‹é¡¹ç›®é…ç½®
aigit --help           # æŸ¥çœ‹å¸®åŠ©
```

---

**æ³¨æ„**: ä½¿ç”¨æ­¤å·¥å…·éœ€è¦æœ‰æ•ˆçš„OpenAIæˆ–DeepSeek APIå¯†é’¥ï¼Œä¼šäº§ç”Ÿç›¸åº”çš„APIè°ƒç”¨è´¹ç”¨ã€‚
